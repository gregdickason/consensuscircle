from agentUtilities import returnMerkleRoot, signMessage, getHashofInput, verifyMessage
import json

instructions = ["eb679ed07fe234df63113f9ac4a7360954abf591629f0dadc3706ed81584a31f"]

merkleRoot = returnMerkleRoot(instructions)

print('merkle root is:')
print(merkleRoot)

convergenceHeader = {"previousBlock":"695e4a0c4f763fc95dfd6c29f334cc2eaf9c4a2bafcce09379b0864eda001eb4","instructionsMerkleRoot":"c9ae7f62e2957993459dc1a673a314d01f0927d3bdb63f1caea163db8088a848","instructionCount":1,"blockHeight":1}

hashConvergenceHeader = "e090173ecde407752e7d328488834a5d98b796eb6379a2282ac139fd9ddba97a"
print(hashConvergenceHeader)
print("agent 5000:")
print(signMessage(hashConvergenceHeader, "f97dcf17b6d0e9f105b6466b377024a9557a7745a9d7ba7dc359aeeeb4530a9e"))
print("agent 5001:")
print(signMessage(hashConvergenceHeader, "e53ab4e385290bf0e24982fd40bb4f626985f75f6c84db6fa46d75ae9da886aa"))
print("agent 5002:")
print(signMessage(hashConvergenceHeader, "b07e2f91e2702f194931eb99d889114b09dfd35d9f6f2fd04d6fdf82d44c5a7a"))
print("agent 5003:")
print(signMessage(hashConvergenceHeader, "430b7686d4dece852e8d28ddd82698bcd0db00bb986bfba71eb9b0288e09f467"))
print("agent 5004:")
print(signMessage(hashConvergenceHeader, "3582e8f1f33fdfab3c927e6daeb2faf41d9383d078af720fcd93fc4afd7c37c7"))

blockHeader = {"version":"entityVersionUsed","staticHeight":"heightbelowwhichaforkisnotallowed","convergenceHeader":{"previousBlock":"695E4A0C4F763FC95DFD6C29F334CC2EAF9C4A2BAFCCE09379B0864EDA001EB4","instructionsMerkleRoot":"f062548393fc990764650a83731bc2ae2bc6308ec0b8c784b01ea7b8b68b26fc","instructionCount":1,"blockHeight":1},"randomNumbers":[{"180cedac0f95b45ec18cdcd473d14d44b512ef16fc065e6c75c769b544d06675":["339345cf13413cd0ff0e6af4f33cce4f0555fb3a50364b64265b05ce134af282","449345cf13413cd0ff0e6af4f33cce4f0555fb3a50364b64265b05ce134af281","559345cf13413cd0ff0e6af4f33cce4f0555fb3a50364b64265b05ce134af281","669345cf13413cd0ff0e6af4f33cce4f0555fb3a50364b64265b05ce134af23d","779345cf13413cd0ff0e6af4f33cce4f0555fb3a50364b64265b05ce134af282"]},{"2efb6ec38d1f9ccfa4b1b88bd98ab9b09c4a484496a5713af177b971ccfb922b":["33054faffa288cf1f3b56c18bf2c34c44a2663f4b8b99282e1e48f85daf1fa53","34054baffa288cf1f3b56c18bf2c34c44a2663f4b8b99282e1e48f85daf1fa52","55054baffa288cf1f3b56c18bf2c34c44a2663f4b8b99282e1e48f85daf1fa52","66054baffa288cf1f3b56c18bf2c34c44a2663f4b8b99282e1e48f85daf1fa55","77054baffa288cf1f3b56c18bf2c34c44a2663f4b8b99282e1e48f85daf1fa59"]},{"2c24af4bd0889b10e325733c9b468779db7b2a82e9052df3b46a8aa1078262ea":["3307655fa560fc2f2e1a072d877859bc70b801713f71d3d914f265423ed1bf53","4407655fa560fc2f2e1a072d877859bc70b801713f71d3d914f265423ed1bf55","5507655fa560fc2f2e1a072d877859bc70b801713f71d3d914f265423ed1bf54","6607655fa560fc2f2e1a072d877859bc70b801713f71d3d914f265423ed1bf51","7707655fa560fc2f2e1a072d877859bc70b801713f71d3d914f265423ed1bf51"]},{"031a3a259e059ec67971841a267528af2fc42bfcc1271259164b822fedf86102":["33b0b02c94f405d2d1112d0bde4b33da8fbc9b7902dd7088b0b76c14afb6e351","54b0b0dc94f405d2d1112d0bde4b33da8fbc9b7902dd7088b0b76c14afb6e359","55b0b0dc94f405d2d1112d0bde4b33da8fbc9b7902dd7088b0b76c14afb6e359","66b0b0dc94f405d2d1112d0bde4b33da8fbc9b7902dd7088b0b76c14afb6e351","77b0b0dc94f405d2d1112d0bde4b33da8fbc9b7902dd7088b0b76c14afb6e353"]},{"5aebce47cab0ff962b7bfde34949f557e5826ccf0a8a572e2f8c8769deb8e58b":["33548ec967f73d6ddaaf19b39c0ad8aab58ef8d7f310d5e36a653f9634f166d4","74548ec967f73d6ddaaf19b39c0ad8aab58ef8d7f310d5e36a653f9634f166d3","55548ec967f73d6ddaaf19b39c0ad8aab58ef8d7f310d5e36a653f9634f166d7","66548ec967f73d6ddaaf19b39c0ad8aab58ef8d7f310d5e36a653f9634f166d2","77548ec967f73d6ddaaf19b39c0ad8aab58ef8d7f310d5e36a653f9634f166d2"]}],"consensusCircle":[{"level":"founder","agentID":"180cedac0f95b45ec18cdcd473d14d44b512ef16fc065e6c75c769b544d06675"},{"level":"defender","agentID":"2efb6ec38d1f9ccfa4b1b88bd98ab9b09c4a484496a5713af177b971ccfb922b"},{"level":"defender","agentID":"2c24af4bd0889b10e325733c9b468779db7b2a82e9052df3b46a8aa1078262ea"},{"level":"protector","agentID":"031a3a259e059ec67971841a267528af2fc42bfcc1271259164b822fedf86102"},{"level":"protector","agentID":"5aebce47cab0ff962b7bfde34949f557e5826ccf0a8a572e2f8c8769deb8e58b"}],"blockSignatures":[{"180cedac0f95b45ec18cdcd473d14d44b512ef16fc065e6c75c769b544d06675":"3046022100d2db6c6b50e45d35ef61f7ab23423b64faafee5875ae08766eaabe7db9c15d3d022100f8a9c062b2ad1b57b0f469d78d70624bd2247ea7c92f6f11d8660936f9bfb70b"},{"2efb6ec38d1f9ccfa4b1b88bd98ab9b09c4a484496a5713af177b971ccfb922b":"304502205e1aed5f901131dd31751e1c24557921f1bcbeb05651b7ab5a862db7accc88f8022100e3e3ab08f3c197e479464c3792259fdd07f4b089d36ba30044abbfcb4e491872"},{"2c24af4bd0889b10e325733c9b468779db7b2a82e9052df3b46a8aa1078262ea":"3046022100ce6a49d5eb25ab0cb273eb0a6850cd8d85eb2e1dcb7a742a31acaf800f6202e2022100fa1b985cc01b74baa5e3070d7961e39460713241baddd0ab0372073dcf0141ff"},{"031a3a259e059ec67971841a267528af2fc42bfcc1271259164b822fedf86102":"304502204b34e301739a03337144edd9082983d9a9b0c37ccc00faf6077157fff87129c9022100d5e99b30fa6b0bc6534e599c7c418772908453a799b0939b985f09fa172f8e64"},{"5aebce47cab0ff962b7bfde34949f557e5826ccf0a8a572e2f8c8769deb8e58b":"30450221008596db19f7f309014c89710cde90bf870f17b5102b9c615ee6d07c15a435bc82022045a863a55cff29ba6b52c4614484bb438ddbd641528fc338f33139ada0865e59"}]}

print('Block hash:')
print(getHashofInput(blockHeader))
